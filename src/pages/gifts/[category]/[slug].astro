---
import Layout from "@layouts/Layout.astro";
import { getCollection } from "astro:content";
import GiftPage from "@components/GiftPage.astro";
import { Image } from "astro:assets";

export async function getStaticPaths() {
  const giftsEntries = await getCollection("gifts");

  return giftsEntries.map((entry) => ({
    params: { slug: entry.slug, category: entry.data?.category || 'all' },
    props: { entry }
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title="Blog">
  <GiftPage title={entry.data.title}>
    <Image class="img-contain" slot="thumbnail" src={entry.data.thumbnail} width="900" height="450" alt={entry.data.title} />
    <Content slot="content" />
  </GiftPage>
</Layout>